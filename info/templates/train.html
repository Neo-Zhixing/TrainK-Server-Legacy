{% extends "./info_base.html" %}
{% load static %}
{% load render_bundle from webpack_loader %}
{% load train %}

{% block title %}{{block.super}}-{{ train.name }}次{% endblock %}

{% block content %}
<div id="entrance">
  <div class="py-5 text-white text-center" style="background-image: url(&quot;{% static "img/train.jpg" %}&quot;);  background-position: center; background-size:cover;">
    <h1 class="display-2">{{ train.name }}</h1>
    <div class="row justify-content-center">
      <div class="col text-right">
        {% with train.stops.0 as stop %}{% with stop.station|station as station %}
        <h1>{{ station.name }}</h1>
        <h2>{{ stop.departureTime|timedelta|timedeltaStr }}</h2>
        {% endwith %}{% endwith %}
      </div>
      <div class="col-2">
        <h1><font-awesome-icon icon="long-arrow-alt-right" size="2x"></font-awesome-icon></h1>
      </div>
      <div class="col text-left">
        {% with train.stops|last as stop %}{% with stop.station|station as station %}
        <h1>{{ station.name }}</h1>
        <h2>{{ stop.arrivalTime|timedelta|timedeltaStr }}</h2>
        {% endwith %}{% endwith %}
      </div>
    </div>
  </div>

  <div class="container py-5">
    <div class="row">
      <div class="col-md-7">
        <div class="position-relative">
          <div class="border border-dark position-absolute h-100" style="width: 0.4rem; left: 5rem; z-index: 2; background-image: repeating-linear-gradient(to bottom, black, black 1.3rem, white 1.3rem, white 2.6rem);"></div>
          <div class="list-group">
            {% for stop in train.stops %}
            {% with station=stop.station|station %}
              <a href="{% url 'station-detail' station.id %}" class="list-group-item list-group-item-action d-flex flex-row align-items-center">
                <div class="mr-2 d-flex flex-column" style="width: 2.5rem;">
                  <h6 class="my-1">{{ stop.arrivalTime|timedelta|timedeltaStr }}</h6>
                  <h6 class="my-1">{{ stop.departureTime|timedelta|timedeltaStr }}</h6>
                </div>
                <span {% if False %}class="rounded border border-dark bg-white"{% endif %} style="width: 1.5rem; height: 1.5rem; z-index: 3;">
                  {% if False %}
                  <font-awesome-icon icon="university" class="w-100 h-100"></font-awesome-icon>
                  {% endif %}
                </span>
                <h1 class="my-0 mx-4">{{ station.name }}</h1>
              </a>
            {% endwith %}
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="col-md-5">
        {% if train.telecode %}
        <delay-chart-card telecode="{{train.telecode}}">
          <a slot="footer" class="btn btn-primary" href="{% url 'record-list' train.telecode %}">查看历史记录</a>
        </delay-chart-card>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block extra_js %}
{{ block.super }}
{% render_bundle 'info' 'js' %}
{% endblock %}